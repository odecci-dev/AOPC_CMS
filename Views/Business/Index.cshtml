@{
  ViewData["Title"] = "User Maintenance";
  Layout = "~/Views/Shared/_Layout.cshtml";
}
@* New DataTables Start*@
<link rel="stylesheet" href="/css/datatable.css" />
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>
@* New DataTables End*@
  <div class="business-main-container">
        <div class="btype-data">
          <div class="list-title">
            <h3>Business Types</h3>
          </div>
   

          <table class="myTableMedium" id="btype-table">
            <thead>
              <th>
                <button class="register" title="Add New" id="btypeadd-btn"
                        style="
                            display:flex;
                            gap: 5px;
                            align-items: center">
                    <svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 -960 960 960" width="12px" fill="var(--light)">
                        <path d="M160-120q-33 0-56.5-23.5T80-200v-160h280v80h240v-80h280v160q0 33-23.5 56.5T800-120H160Zm280-240v-80h80v80h-80ZM80-440v-200q0-33 23.5-56.5T160-720h160v-80q0-33 23.5-56.5T400-880h160q33 0 56.5 23.5T640-800v80h160q33 0 56.5 23.5T880-640v200H600v-80H360v80H80Zm320-280h160v-80H400v80Z" />
                    </svg>
                    Add New
                </button>
              </th>
 
              <th>Promo</th>
              @*<th>Type</th>*@
              <th>Date Created</th>
            </thead>
            <tbody>

            </tbody>
          </table>
        </div>
        <div class="bloc-data">
          <div class="list-title">
            <h3>Business Locations</h3>
          </div>
          <table class="myTableMedium" id="businessloc-table">
            <thead>
              <th>
                <button class="register" title="Add New" id="add-bloc" 
                    style="
                        display:flex;
                        gap: 5px;
                        align-items: center">
                    <svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 -960 960 960" width="12px" fill="var(--light)">
                        <path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 400Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Z" />
                    </svg>
                    Add New
                </button>
              </th>
              <th>Postal Code</th>
              <th>Country</th>
              <th>Date Created</th>
            </thead>
            <tbody >

            </tbody>
          </table>
        </div>
        <div class="business-data">
          <div class="list-title">
            <h3>Hotels</h3>
          </div>
     
          <table class="myTableLarge" id="b-table">
            <thead>
              <th>
                <button class="register" title="Add New" id="add-business" 
                    style="
                        display:flex;
                        gap: 5px;
                        align-items: center">
                    <svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 -960 960 960" width="12px" fill="var(--light)">
                        <path d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z" />
                    </svg>
                    Add New
                </button>
              </th>
              <th>Location</th>
              <th>Address</th>
              <th>Contact No.</th>
              <th>Email</th>
              <th>Url</th>
              <th>Date Created</th>
            </thead>
            <tbody>

            </tbody>
          </table>
        </div>
      </div>
@* Modal *@

<div class="modal fade" id="blocmodal" tabindex="-1" role="dialog" aria-labelledby="modal-title"
        aria-hidden="true" style="display: none;" data-keyboard="false" data-backdrop="static" >
   <div class="modal-dialog modal-error-dialog" style="max-width: 600px;margin: 1.75rem auto;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-name"></h4>
                    <button type="button" id="h-close" class="close" data-dismiss="modal" aria-hidden="false">x</button>
                </div>
                <div class="col-lg-12" style="margin:10px">

                    <form action="" class="mod-form" id="submitbloc">
          
          <div class="mod-form-row">
            <div class="input-container-whole">
                <label for="employeeID">Country<span class="req" >*</span></label>
              <input type="text" value="" id="country"  class="mod-input"  placeholder="Country" required />
             
            </div>
         
          </div>
          <div class="mod-form-row">
           <div class="input-container-whole">
             <label for="employeeID">City<span class="req" >*</span></label>
              <input type="text" value="" id="city"  class="mod-input"  placeholder="City" required />
            </div>
               
          </div>
          <div class="mod-form-row">
      <div class="input-container-whole">
              <label for="email">Postal<span class="req" >*</span></label>
              <input type="text" value="" id="postal" class="mod-input" placeholder="Postal Code" required/>
            </div>
         
          </div>
        
       
          
          <div class="actions" style="align-items: center;">
            <div class="actionss">
             @* <button class="register" type="button" style ="margin-bottom: 5px;font-size: 13px;    padding: 5px 15px 5px 5px;height: 25px;font-size: clamp(0.5rem, 2vw, 0.7rem);" title="Add New" id="add Mechanics"><i class="fas fa-id-card"></i>Add Mechanics</button> *@
             @* <input type="button" value="Add Mechanics" id="btn-register"/> <i class="fas fa-cogs"></i> *@

            </div>

            <a  data-dismiss="modal" aria-hidden="false" style="cursor:pointer" class="cancel"><u>Cancel</u></a>
            <input type="submit" value="Submit" id="btn-save"/>
          </div>
        </form>




                </div>
            </div>
        </div>
    </div>
<div class="modal fade" id="btypemodal" tabindex="-1" role="dialog" aria-labelledby="modal-title"
        aria-hidden="true" style="display: none;" data-keyboard="false" data-backdrop="static" >
   <div class="modal-dialog modal-error-dialog" style="max-width: 600px;margin: 1.75rem auto;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title"id="btypemodalmodal-name"></h4>
                    <button type="button" id="btype-close" class="close" data-dismiss="modal" aria-hidden="false">x</button>
                </div>
                <div class="col-lg-12" style="margin:10px">

        <form action="" class="mod-form" id="submitbtype">
          <div class="mod-form-row">
            <div class="input-container-whole">

              <div class="upload-image-preview" id="upload-image-preview" style="background-color: gainsboro;">
                <img
                  width="100%"
                  src="https://www.alfardanoysterprivilegeclub.com/assets/img/defaultavatar.png"
                  alt=""
                />
              </div>
            </div>
            <div class="input-container-whole upload" >
              <label for="img">Upload Image</label>
              <input
                type="file"
                value=""
                id="img"
                class="mod-input img-choose"
                name="uploadimg" accept="image/*"
              />
            </div>
          </div>
          <div class="mod-form-row">
            <div class="input-container-whole">
                <label for="employeeID">Business Type Name<span class="req" >*</span></label>
                <input type="text" value="" id="btypename"  class="mod-input"  placeholder="Business Type Name" required />
             
            </div>
            @*<div class="input-container-whole">
              <label for="vipStatus">VIP Status</label>
              <select id="vip-option"  class="mod-input" required>
                        <option value="" disabled selected>Select your option</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>            
              </select>
            </div>*@
               
          </div>
          <div class="mod-form-row">
           <div class="input-container-whole">
             <label for="employeeID">Description<span class="req" >*</span></label>
              @* <input type="text" value="" id="description"  class="mod-input"  placeholder="Description"  /> *@
              <textarea value="" id="description"  class="mod-input"  placeholder="Description" style="resize: vertical; min-height: 100px"></textarea>
            </div>
               
          </div>
          <div class="mod-form-row">
          <div class="input-container-whole">
              <label for="employeeID">Promo Text<span class="req" >*</span></label>
                            <input type="text" value="" id="promoT" class="mod-input" placeholder="Promo Text" required />
            </div>
         
          </div>
        
       
          
          <div class="actions" style="align-items: center;">
            <div class="actionss">
             @* <button class="register" type="button" style ="margin-bottom: 5px;font-size: 13px;    padding: 5px 15px 5px 5px;height: 25px;font-size: clamp(0.5rem, 2vw, 0.7rem);" title="Add New" id="add Mechanics"><i class="fas fa-id-card"></i>Add Mechanics</button> *@
             @* <input type="button" value="Add Mechanics" id="btn-register"/> <i class="fas fa-cogs"></i> *@

            </div>

            <a  data-dismiss="modal" aria-hidden="false" style="cursor:pointer" class="cancel"><u>Cancel</u></a>
            <input type="submit" value="Submit" id="btypesave"/>
          </div>
        </form>




                </div>
            </div>
        </div>
</div>
 <div class="modal fade" id="bmodal" tabindex="-1" role="dialog" aria-labelledby="modal-title"
        aria-hidden="true" style="display: none;" data-keyboard="false" data-backdrop="static" >

       <div class="modal-dialog modal-error-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="bmodal-name"></h4>
                    <button type="button" id="bh-close" class="close" data-dismiss="modal" aria-hidden="false">x</button>
                </div>
                <div class="col-lg-12" style="margin:10px">

    <form action="" class="mod-form"  id="submitbusiness">
          <div class="mod-form-row">
            <div class="input-container-whole">

              <div class="upload-image-preview" id="upload-image-preview">
                <img
                  width="100%"
                  src="https://www.alfardanoysterprivilegeclub.com/assets/img/defaultavatar.png"
                  alt=""
                />
              </div>
                            <div class="input-container-whole upload">
                                <label for="img">Upload Profile</label>
                                <input type="file"
                                       value=""
                                       id="admin-img"
                                       class="mod-input img-choose"
                                       name="uploadimg" accept="image/*" />
                            </div>
            </div>
             <div class="input-container-whole ">
                            <div class="input-gallery" id="upload-image-preview_multiple">
                    
                               
                            </div>
                 <div class="input-container-whole">
                
                    <label for="fileUpload">Upload Images</label>
                   <input type="file"
                   value=""
                   class="mod-input img-choose"
                   id="fileUpload" 
                   accept="image/*"
                  name="mul_upload"  multiple/>
                 </div>
          </div>
 
          </div> 
          <div class="mod-form-row">
            <div class="input-container-whole">
              <label for="employeeID">Hotel Name <span class="req" >*</span></label>
             <input type="text" id="hotelname" class="mod-input" required />
            </div>
            <div class="input-container-whole">
              <label for="email">Contact Number </label>
           <input type="text" id="cno" class="mod-input"  />
            </div>
          </div>
          <div class="mod-form-row">
            <div class="input-container-whole">
              <label for="fname">Address <span class="req" >*</span></label>
              <textarea id="Address" name="Address" rows="4" cols="50" class="mod-input" style="height: 40px;"></textarea>
            </div>
            </div>
          <div class="mod-form-row">
            <div class="input-container-whole">
              <label for="fname">Description</label>
              <textarea id="descrip" name="Address" rows="4" cols="50" class="mod-input" style="resize: vertical; min-height: 100px"></textarea>
            </div>
            
          </div>
 

          <div class="mod-form-row">
            <div class="input-container-whole">
              <label for="fname">Services</label>
              @*<input type="text" value="" id="Services" class="mod-input" maxlength="255" placeholder="For multiple data please use {;} to seperate"/>*@
              <textarea id="Services" name="Services" rows="4" cols="50" class="mod-input" style="resize: vertical; min-height: 100px" placeholder="For multiple data please use {;} to seperate"></textarea>
            </div>
          </div>
                    <div class="mod-form-row">
                        <div class="input-container-whole">
                            <label for="fname">Email</label>
                            <input type="email" value="" id="email" class="mod-input" />
                        </div>
                        <div class="input-container-whole">
                            <label for="lname">Url <span class="req">*</span></label>
                            <input type="text" value="" id="Url" class="mod-input" required />
                        </div>
                    </div>
          <div class="mod-form-row">
            <div class="input-container-whole">
             @* <label for="btype-option"> Business Type <span class="req" >*</span></label>
                <select id="btype-option" class="mod-input" required >

                </select>*@
                  <label for="fname">Map <span class="req" >*</span></label>
              <input type="text" value="" id="Map" class="mod-input" required />
            </div>
             <div class="input-container-whole">
              <label for="username">Business Location <span class="req" >*</span></label>
               <select id="bloc-option" class="mod-input" required >

                </select>
            </div>
          </div>
           <div class="actions" style="align-items: center;">
                        <div class="actionss">
                            @* <button class="register" type="button" style ="margin-bottom: 5px;font-size: 13px;    padding: 5px 15px 5px 5px;height: 25px;font-size: clamp(0.5rem, 2vw, 0.7rem);" title="Add New" id="add Mechanics"><i class="fas fa-id-card"></i>Add Mechanics</button> *@
                            @* <input type="button" value="Add Mechanics" id="btn-register"/> <i class="fas fa-cogs"></i> *@

                        </div>

                        <a data-dismiss="modal" aria-hidden="false" style="cursor:pointer" class="cancel"><u>Cancel</u></a>
                        <input type="submit" value="Submit" id="bsave" />
                    </div>
                    </form>
                    </div>
            </div>
        </div>
    </div>

 <script src="/js/business.js" async defer></script>
@section Scripts{
      <script >

        var i_id = "";
        var img_edit="";    
         var img_multi="";
          $(document).ready(function () {
              $("input[name=uploadimg]").change(function () {
          
              if (this.files && this.files[0]) {
                  var reader = new FileReader();

                  reader.onload = function (e) {
                      var img = $('<img>').attr('src', e.target.result);
                      img.attr('height', '140px');
                      img.attr('width', '230px');
                      $('.upload-image-preview').html(img);
                  };
                  reader.readAsDataURL(this.files[0]);
              }
          });    
          //$("input[name=mul_upload]").change(function (e) {
          //      var total_file = document.getElementById("fileUpload").files.length;
          //      var files = e.target.files,
          //          filesLength = files.length;
          //      for (var i = 0; i < filesLength; i++) {
          //          var f = files[i]
          //          var fileReader = new FileReader();
          //          fileReader.onload = (function (e) {
          //              var file = e.target;
          //              $('#upload-image-preview_multiple').append("<img class=galley-imgs src=" + e.target.result + " title=" + file.name + "/>");
          //          });
          //          fileReader.readAsDataURL(f);
          //      }
  
                
          //});

          function GetImageGallery() {
            IdList = [];
                $('#upload-image-preview_multiple').each(function (id, item) {
                var id = $(item).data('s');
                IdList.push({
                    id: id
                });
            });
            return IdList;
        }
        $("#fileUpload").on("change", function (e) {
            var files = e.target.files,
            filesLength = files.length;
            var container = $('#upload-image-preview_multiple');
            var span = $('<span>').attr('class', "remove");
            var div = $('<span>').attr('class', "pip");
          for (var i = 0; i < filesLength; i++) {
            var f = files[i]
           
            var fileReader = new FileReader();
            fileReader.onload = (function(e) {
              var file = e.target;
                    
                        var img = $('<img>').attr('src', e.target.result);
                 
                        // console.log(f);
              
      
                        img.attr('height', '50px');
                        img.attr('width', '50px');
                        img.attr('id', "");
                        img.attr('class', "imageThumb");
                        span.text("x");
                        span.attr("onclick", "removegallerydata()");
                        div.append(img);
                        div.append(imgs);
                        div.append(span);
                        container.append(div);
              $(".remove").click(function(){
                $(this).parent(".pip").remove();
              });
          
            });
            fileReader.readAsDataURL(f);
          }

          for(var x=0; x<files.length;x++)
          {          var imgs = $('<img>').attr('name',"https://www.alfardanoysterprivilegeclub.com/assets/img/"+files[x].name);
            div.append(imgs);
              // console.log(files[x].name);
          }

        });
          // dbtable = $('#businessloc-table').DataTable({
                         
          //           "bPaginate": false,
          //           "bFilter": false,
          //           "stripeClasses": [],
          //           "ordering": false,
          //           "ordering": false,
          //           "info": false,
          //           "bInfo": false,
          //           "bAutoWidth": false,
          //           "bLengthChange": false, 
                  
          //             "aLengthMenu": [7],
          //             "searching": true,
          //           "oLanguage": { "sZeroRecords": "", "sEmptyTable": "" }

          //     });
          // btypetable = $('#btype-table').DataTable({
          //  "bPaginate": false,
          //       "bFilter": false,
          //       "stripeClasses": [],
          //       "ordering": false,
          //       "ordering": false,
          //       "info": false,
          //       "bInfo": false,
          //       "bAutoWidth": false,
          //       "bLengthChange": false,
          //       "paging": true,
          //             "aLengthMenu": [4],
          //             "searching": true
          //       , "oLanguage": { "sZeroRecords": "", "sEmptyTable": "" }

          //     });
          // btable = $('#b-table').DataTable({
          //         "bPaginate": false,
          //           "bFilter": false,
          //           "stripeClasses": [],
          //           "ordering": false,
          //           "ordering": false,
          //           "info": false,
          //           "bInfo": false,
          //           "bAutoWidth": false,
          //           "bLengthChange": false, 
          //          "paging": true,
          //             "aLengthMenu": [4],
          //             "searching": true,
          //           "oLanguage": { "sZeroRecords": "", "sEmptyTable": "" }
          //     });
        ShowBusinesslocDetails();
        ShowBusinessTypeList();
        ShowBusinessListv2();

        ShowOptBtype();
        ShowOptBloctype();
        ShowOptBtype();
      });

     
    // function ShowBusinessList() {
    //     $.blockUI(reloadLoading);
    //     // setTimeout(function () {
    //     //           $.ajax({
    //     //               url: '/Business/GetBusinessList',
    //     //               data: {

    //     //               },
    //     //               type: "GET",
    //     //               datatype: "json"
    //     //           }).done(function (data) {
    //     //                 //console.log(data);
    //     //         btable.clear().draw();
    //     //         for (var i = 0; i < data.length; i++) {



    //     //                 var tdbuttons = ' <div class="data-img">' +
    //     //                                   '<img src=' + data[i].featureImg + ' alt=' + data[i].businessName + ' width="100%" />' +
    //     //                                   '</div>' +
    //     //                                   '<div>' +
    //     //                                   '<p>' + data[i].businessID + '</p>' +
    //     //                                   '<p>' + data[i].businessName + '</p>' +
    //     //                                    '<div class="action"><a class="tbl-edit" data-id="'+data[i].id  + '">'+
    //     //                                   '<svg width="11" height="11" viewBox="0 0 11 11" fill="none"xmlns="http://www.w3.org/2000/svg">' +
    //     //                                   '<path d="M5.02558 1.92456H1.89457C1.65732 1.92456 1.42978 2.0164 1.26201 2.17986C1.09425 2.34333 1 2.56504 1 2.79621V8.89779C1 9.12896 1.09425 9.35067 1.26201 9.51414C1.42978 9.6776 1.65732 9.76944 1.89457 9.76944H8.15659C8.39385 9.76944 8.62139 9.6776 8.78915 9.51414C8.95692 9.35067 9.05117 9.12896 9.05117 8.89779V5.847"' +
    //     //                                   'stroke="black"' +
    //     //                                   'stroke-linecap="round"' +
    //     //                                   'stroke-linejoin="round"/>' +
    //     //                                   '<path d="M8.38023 1.27079C8.55817 1.09741 8.79951 1 9.05116 1C9.30281 1 9.54415 1.09741 9.72209 1.27079C9.90003 1.44417 10 1.67933 10 1.92453C10 2.16973 9.90003 2.40488 9.72209 2.57827L5.47286 6.71862L3.68372 7.15445L4.131 5.41114L8.38023 1.27079Z"' +
    //     //                                   'stroke="black"' +
    //     //                                   'stroke-linecap="round"' +
    //     //                                   'stroke-linejoin="round"/>' +
    //     //                                   '</svg>' +

    //     //                                   '<span >Edit</span>' +
    //     //                                   ' </a>' +
    //     //                                   '<a class="tbl-delete"  data-id="' + data[i].id + '" >' +
    //     //                                   '<svg width="11" height="10" viewBox="0 0 11 10" fill="none"  xmlns="http://www.w3.org/2000/svg">' +
    //     //                                   '<path d="M2.56574 1C2.56574 0.734784 2.67387 0.48043 2.86634 0.292893C3.0588 0.105357 3.31985 0 3.59204 0H6.67092C6.94311 0 7.20416 0.105357 7.39663 0.292893C7.58909 0.48043 7.69722 0.734784 7.69722 1V2H9.74981C9.88591 2 10.0164 2.05268 10.1127 2.14645C10.2089 2.24021 10.263 2.36739 10.263 2.5C10.263 2.63261 10.2089 2.75979 10.1127 2.85355C10.0164 2.94732 9.88591 3 9.74981 3H9.20126L8.75636 9.071C8.73793 9.32329 8.62207 9.55941 8.43211 9.73179C8.24215 9.90417 7.99221 10 7.73263 10H2.52982C2.27024 10 2.0203 9.90417 1.83034 9.73179C1.64038 9.55941 1.52452 9.32329 1.50609 9.071L1.06222 3H0.513148C0.377053 3 0.246531 2.94732 0.150298 2.85355C0.0540636 2.75979 0 2.63261 0 2.5C0 2.36739 0.0540636 2.24021 0.150298 2.14645C0.246531 2.05268 0.377053 2 0.513148 2H2.56574V1ZM3.59204 2H6.67092V1H3.59204V2ZM2.09056 3L2.53033 9H7.73314L8.17291 3H2.09056ZM4.10518 4C4.24128 4 4.3718 4.05268 4.46803 4.14645C4.56427 4.24021 4.61833 4.36739 4.61833 4.5V7.5C4.61833 7.63261 4.56427 7.75979 4.46803 7.85355C4.3718 7.94732 4.24128 8 4.10518 8C3.96909 8 3.83857 7.94732 3.74233 7.85355C3.6461 7.75979 3.59204 7.63261 3.59204 7.5V4.5C3.59204 4.36739 3.6461 4.24021 3.74233 4.14645C3.83857 4.05268 3.96909 4 4.10518 4ZM6.15778 4C6.29387 4 6.42439 4.05268 6.52063 4.14645C6.61686 4.24021 6.67092 4.36739 6.67092 4.5V7.5C6.67092 7.63261 6.61686 7.75979 6.52063 7.85355C6.42439 7.94732 6.29387 8 6.15778 8C6.02168 8 5.89116 7.94732 5.79493 7.85355C5.69869 7.75979 5.64463 7.63261 5.64463 7.5V4.5C5.64463 4.36739 5.69869 4.24021 5.79493 4.14645C5.89116 4.05268 6.02168 4 6.15778 4Z"' +
    //     //                                   'fill="black"/>' +
    //     //                                   '</svg>' +
    //     //                                   '<span>Delete</span></a>' +
    //     //                                   '</div></div>';
    //     //             $('#b-table').dataTable().fnAddData([

    //     //               '<td>' + tdbuttons + '</td>',
    //     //                           '<td><p>' + data[i].city + ', '+data[i].country +' </p></td>',
    //     //                           '<td><p>'+data[i].address+'</p></td>',
    //     //                           '<td><p>'+data[i].cno+'</p></td>',
    //     //                           '<td><p>'+data[i].email+'</p></td>',
    //     //                           '<td><p>'+data[i].url+'</p></td>',
    //     //                           '<td><p>' + data[i].dateCreated + '</p></td>',



              
    //     //                     ]);
    //     //             }
    //     //           $.unblockUI();
    //     //         }).fail(function () {
    //     //           alert("There was an Error When Loading Data...");
    //     //         });

    //     //       }, 100);
    // new DataTable('#b-table', {
    //     ajax: {
    //         url: '/Business/GetBusinessList',
    //         type: "GET",
    //         dataType: "json",
    //         processing: true,
    //         serverSide: true,
    //         complete: function (xhr) {
    //             // console.log(xhr);
    //         },
    //         error: function (err) {
    //             alert(err.responseText);
    //         }
    //     },
    //     // columns: [
    //     //     {
    //     //         data: 'featureImg'//,
    //     //         // render: function (data, type, row) {
    //     //         //     var tdbuttons = '<div class="data-img">' +
    //     //         //                     '<img src=' + data + ' alt=' + row.businessName + ' width="100%" />' +
    //     //         //                     '</div>' +
    //     //         //                     '<div>' +
    //     //         //                     '<p>' + row.businessID + '</p>' +
    //     //         //                     '<p>' + row.businessName + '</p>' +
    //     //         //                     '<div class="action"><a class="tbl-edit" data-id="'+row.id  + '">'+
    //     //         //                     '<svg width="11" height="11" viewBox="0 0 11 11" fill="none"xmlns="http://www.w3.org/2000/svg">' +
    //     //         //                     '<path d="M5.02558 1.92456H1.89457C1.65732 1.92456 1.42978 2.0164 1.26201 2.17986C1.09425 2.34333 1 2.56504 1 2.79621V8.89779C1 9.12896 1.09425 9.35067 1.26201 9.51414C1.42978 9.6776 1.65732 9.76944 1.89457 9.76944H8.15659C8.39385 9.76944 8.62139 9.6776 8.78915 9.51414C8.95692 9.35067 9.05117 9.12896 9.05117 8.89779V5.847"' +
    //     //         //                     'stroke="black"' +
    //     //         //                     'stroke-linecap="round"' +
    //     //         //                     'stroke-linejoin="round"/>' +
    //     //         //                     '<path d="M8.38023 1.27079C8.55817 1.09741 8.79951 1 9.05116 1C9.30281 1 9.54415 1.09741 9.72209 1.27079C9.90003 1.44417 10 1.67933 10 1.92453C10 2.16973 9.90003 2.40488 9.72209 2.57827L5.47286 6.71862L3.68372 7.15445L4.131 5.41114L8.38023 1.27079Z"' +
    //     //         //                     'stroke="black"' +
    //     //         //                     'stroke-linecap="round"' +
    //     //         //                     'stroke-linejoin="round"/>' +
    //     //         //                     '</svg>' +

    //     //         //                     '<span >Edit</span>' +
    //     //         //                     ' </a>' +
    //     //         //                     '<a class="tbl-delete"  data-id="' + row.id + '" >' +
    //     //         //                     '<svg width="11" height="10" viewBox="0 0 11 10" fill="none"  xmlns="http://www.w3.org/2000/svg">' +
    //     //         //                     '<path d="M2.56574 1C2.56574 0.734784 2.67387 0.48043 2.86634 0.292893C3.0588 0.105357 3.31985 0 3.59204 0H6.67092C6.94311 0 7.20416 0.105357 7.39663 0.292893C7.58909 0.48043 7.69722 0.734784 7.69722 1V2H9.74981C9.88591 2 10.0164 2.05268 10.1127 2.14645C10.2089 2.24021 10.263 2.36739 10.263 2.5C10.263 2.63261 10.2089 2.75979 10.1127 2.85355C10.0164 2.94732 9.88591 3 9.74981 3H9.20126L8.75636 9.071C8.73793 9.32329 8.62207 9.55941 8.43211 9.73179C8.24215 9.90417 7.99221 10 7.73263 10H2.52982C2.27024 10 2.0203 9.90417 1.83034 9.73179C1.64038 9.55941 1.52452 9.32329 1.50609 9.071L1.06222 3H0.513148C0.377053 3 0.246531 2.94732 0.150298 2.85355C0.0540636 2.75979 0 2.63261 0 2.5C0 2.36739 0.0540636 2.24021 0.150298 2.14645C0.246531 2.05268 0.377053 2 0.513148 2H2.56574V1ZM3.59204 2H6.67092V1H3.59204V2ZM2.09056 3L2.53033 9H7.73314L8.17291 3H2.09056ZM4.10518 4C4.24128 4 4.3718 4.05268 4.46803 4.14645C4.56427 4.24021 4.61833 4.36739 4.61833 4.5V7.5C4.61833 7.63261 4.56427 7.75979 4.46803 7.85355C4.3718 7.94732 4.24128 8 4.10518 8C3.96909 8 3.83857 7.94732 3.74233 7.85355C3.6461 7.75979 3.59204 7.63261 3.59204 7.5V4.5C3.59204 4.36739 3.6461 4.24021 3.74233 4.14645C3.83857 4.05268 3.96909 4 4.10518 4ZM6.15778 4C6.29387 4 6.42439 4.05268 6.52063 4.14645C6.61686 4.24021 6.67092 4.36739 6.67092 4.5V7.5C6.67092 7.63261 6.61686 7.75979 6.52063 7.85355C6.42439 7.94732 6.29387 8 6.15778 8C6.02168 8 5.89116 7.94732 5.79493 7.85355C5.69869 7.75979 5.64463 7.63261 5.64463 7.5V4.5C5.64463 4.36739 5.69869 4.24021 5.79493 4.14645C5.89116 4.05268 6.02168 4 6.15778 4Z"' +
    //     //         //                     'fill="black"/>' +
    //     //         //                     '</svg>' +
    //     //         //                     '<span>Delete</span></a>' +
    //     //         //                     '</div></div>';

    //     //         //     return tdbuttons;
    //     //         //     }

    //     //         },
    //     //         {
    //     //             data: 'city',
    //     //             render: function(data, type, row){
    //     //                 var city = '<p>' + data + ', '+ row.country +' </p>';

    //     //                 return city;
    //     //             }
    //     //         },
    //     //         {
    //     //             data: 'cno'
    //     //         },
    //     //         {
    //     //             data: 'cno'
    //     //         },
    //     //         {
    //     //             data: 'url'
    //     //         },
    //     //         {
    //     //             data: 'dateCreated'
    //     //         }
    //     //     ]
    //     });


    // }

    $('#businessloc-table').on('click', '.tbl-edit', function () {

            i_id = $(this).data("id");
            postalCode = $(this).data("pc");
            country = $(this).data("country");
            city = $(this).data("city");
            $('#country').val(country);
            $('#postal').val(postalCode);
            $('#city').val(city);
            document.getElementById("modal-name").innerHTML= 'Edit Business Locations';
            document.getElementById("btn-save").innerHTML= 'Update';


            $('#blocmodal').modal('show');
    });
    $('#b-table').on('click', '.tbl-edit', function () {
                    
                  i_id = $(this).data("id");
                  
                  var data = {};
              data.id = i_id;
              // console.log(data);
                  $.ajax({
                      url: '/Business/GetBusinessFilter',
                            data: {
                                data: data,
                            },
                            type: "POST",
                            datatype: "json",
                      success: function (data) {
                          //console.log(data);
                          for (var i = 0; i < data.length; i++) {




                                                //BusinessName = $(this).data("hotelname");
                                                //TypeId = $(this).data("btypeid");
                                                //LocationId = $(this).data("blocid");
                                                //Description = $(this).data("desc");
                                                //Address = $(this).data("address");
                                                //Cno = $(this).data("cno");
                                                //Email = $(this).data("email");
                                                //Url = $(this).data("url");
                                                //Services = $(this).data("services");
                                                FeatureImg = data[i].featureImg;
                                                //Map = $(this).data("map");
                                                gallery = data[i].gallery;
                                                $('#hotelname').val(data[i].businessName);
                                                
                                                
                                                $('#btype-option').val(data[i].btypeid);
                                                $('#bloc-option').val(data[i].blocid);
                                                $('#descrip').val(data[i].description);
                                                $('#Address').val(data[i].address);
                                                $('#cno').val(data[i].cno);
                                                $('#email').val(data[i].email);
                                                $('#Url').val(data[i].url);
                                                $('#Services').val(data[i].services);
                                                $('#Map').val(data[i].map);

                                                if (FeatureImg != null) {
                                                    var img = $('<img>').attr('src', FeatureImg);
                                                    img.attr('height', '120px');
                                                    img.attr('width', '120px');
                                                    $('.upload-image-preview').html(img);
                                                }
                                                else {
                                                    document.getElementById("upload-image-preview").innerHTML = '<i class="fas fa-user-tie fa-5x" style="  margin-left: 25px;"></i><br>Photo Preview</div>';
                                                }
                                                img_edit = FeatureImg.split('/')[5];
                                                document.getElementById("bmodal-name").innerHTML = 'Edit Business Location';
                                                document.getElementById("btn-save").innerHTML = 'Update';
                                                let gal_img = gallery;
                                                const myarray = gal_img.split(";");
                                                for (var i = 0; i < myarray.length; i++) {
                                                    //console.log(myarray[i].split('/')[5]);
                                                }
                                              var data = {};
                                              data.id = i_id;
                                              // console.log(data);
                                                $.ajax({
                                                    url: '/Business/GetBusinessGalArray',
                                                    data: {
                                                        data: data,
                                                    },
                                                    type: "POST",
                                                    datatype: "json",
                                                    success: function (data) {
                                                        //console.log(data);
                                                        var container = $('#upload-image-preview_multiple');
                                                        container.empty();
                                                        for (var i = 0; i < data.length; i++) {
                                                            //console.log( data[i].gallery)
                                                            var img = $('<img>').attr('src', data[i].gallery);
                                                            var imgs = $('<img>').attr('name', data[i].gallery);
                                                            var span = $('<span>').attr('class', "remove");
                                                            var div = $('<span>').attr('class', "pip");
                                                            img.attr('height', '50px');
                                                            img.attr('width', '50px');
                                                            img.attr('id', data[i].id);
                                                            img.attr('class', "imageThumb");
                                                            span.text("x");
                                                            span.attr("onclick", "removegallerydata()");
                                                            div.append(img);
                                                            div.append(imgs);
                                                            div.append(span);
                                                            container.append(div);

                                                            $(".remove").click(function () {
                                                                $(this).parent(".pip").remove();
                                                            });

                                                        }
                                                    }
                                                });
                                                $('#bmodal').modal('show');
                          }
                      }

                        
                            //});
                   });

                 
         
     });
              
    function removegallerydata(e)
    {
        $(this).parent().remove();
    }
        $('#btype-table').on('click', '.tbl-edit', function () {

                i_id = $(this).data("id");
                btypename = $(this).data("btypename");
                desc = $(this).data("descrip");
                isVIP = $(this).data("vip");
                promoText = $(this).data("promo");
                imgurl = $(this).data("imgurl");
                // console.log(promoText);
                $('#promoT').val(promoText);
                //$('#vip-option').val(isVIP);
                $('#btypename').val(btypename);
                $('#description').val(desc);
                    if (imgurl != null) 
                    {
                    var img = $('<img>').attr('src', imgurl);
                    img.attr('height', '120px');
                    img.attr('width', '120px');
                    $('.upload-image-preview').html(img);
                    } 
                    else {
                    document.getElementById("upload-image-preview").innerHTML = '<i class="fas fa-user-tie fa-5x" style="  margin-left: 25px;"></i><br>Photo Preview</div>';
                    }
                
                    img_edit= imgurl.split('/')[5];
            document.getElementById("btypemodalmodal-name").innerHTML = 'Edit Business Type';
            document.getElementById("btypesave").innerHTML = 'Update';
            $('#btypemodal').modal('show');
        });
        $('#businessloc-table').on('click', '.tbl-delete', function () {

                    var data = {};
                    data.id = $(this).data("id");
                    //  
                    iziToast.question({
                        timeout: 20000,
                        close: false,
                        overlay: true,
                        id: 'question',
                        zindex: 999,
                        title: 'Confirmation',
                        message: 'Are you sure you want to delete?',
                        position: 'center',
                        buttons: [
                            ['<button><b>YES</b></button>', function (instance, toast) {
                                $.blockUI(reloadLoading);
                                $.ajax({
                                    url: '/Business/DeleteBusinessLocInfo',
                                data: {
                                        data: data,
                                    },
                                    type: "POST",
                                    datatype: "json"
                                }).done(function (data) {
                                    
                                    //console.log(data.stats);
                                    if(data.stats=="Successfully Deleted" )
                                    {
                                        notifyMsg('Success!', data.stats, 'green', 'fas fa-check');
                                        $("#h-close").click();
                                        businessLocTable.destroy();
                                        ShowBusinesslocDetails();
                                    }
                                    else
                                    {
                                        notifyMsg('Warning!', data.stats, 'red', 'fas fa-exclamation-triangle');
                                    }
                                  
                                    $.unblockUI();

                                }).fail(function () {
                                    alert("There was an Error When Loading Data...");
                                });
                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }, true],
                            ['<button>NO</button>', function (instance, toast) {

                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }],
                        ]
                    });

        });
        $('#btype-table').on('click', '.tbl-delete', function () {
              
                    var data = {};
                    data.id = $(this).data("id");
                    //  
                    iziToast.question({
                        timeout: 20000,
                        close: false,
                        overlay: true,
                        id: 'question',
                        zindex: 999,
                        title: 'Confirmation',
                        message: 'Are you sure you want to delete?',
                        position: 'center',
                        buttons: [
                            ['<button><b>YES</b></button>', function (instance, toast) {
                                $.blockUI(reloadLoading);
                                $.ajax({
                                    url: '/Business/DeleteBusinessTypeInfo',
                                data: {
                                        data: data,
                                    },
                                    type: "POST",
                                    datatype: "json"
                                }).done(function (data) {
                                    
                                    // console.log(data.stats);
                                    if(data.stats=="Successfully Deleted" )
                                    {
                                        notifyMsg('Success!', data.stats, 'green', 'fas fa-check');
                               
                                        ShowBusinessTypeList();
                                    }
                                    else
                                    {
                                        notifyMsg('Warning!', data.stats, 'red', 'fas fa-exclamation-triangle');
                                    }
                                  
                                    $.unblockUI();

                                }).fail(function () {
                                    alert("There was an Error When Loading Data...");
                                });
                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }, true],
                            ['<button>NO</button>', function (instance, toast) {

                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }],
                        ]
                    });
           
        });
        $('#b-table').on('click', '.tbl-delete', function () {
              
                    var data = {};
                    data.id = $(this).data("id");
                    //  
                    iziToast.question({
                        timeout: 20000,
                        close: false,
                        overlay: true,
                        id: 'question',
                        zindex: 999,
                        title: 'Confirmation',
                        message: 'Are you sure you want to delete?',
                        position: 'center',
                        buttons: [
                            ['<button><b>YES</b></button>', function (instance, toast) {
                                $.blockUI(reloadLoading);
                                $.ajax({
                                    url: '/Business/DeleteBusinessInfo',
                                data: {
                                        data: data,
                                    },
                                    type: "POST",
                                    datatype: "json"
                                }).done(function (data) {
                                    
                                    // console.log(data.stats);
                                    if(data.stats=="Successfully Deleted" )
                                    {
                                        notifyMsg('Success!', data.stats, 'green', 'fas fa-check');
                               
                                        ShowBusinessListv2();



                                    }
                                    else
                                    {
                                        notifyMsg('Warning!', data.stats, 'red', 'fas fa-exclamation-triangle');
                                    }
                                  
                                    $.unblockUI();

                                }).fail(function () {
                                    alert("There was an Error When Loading Data...");
                                });
                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }, true],
                            ['<button>NO</button>', function (instance, toast) {

                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }],
                        ]
                    });
           
        });
        $('#add-bloc').click(function () {
            i_id=0;
            $('input[type="text"]').val("");
            document.getElementById("modal-name").innerHTML = 'Add Business Location';
            document.getElementById("btn-save").innerHTML = 'Save';
            $('#blocmodal').modal('show');

        });
        $('#btypeadd-btn').click(function () {
            i_id=0;
            $('input[type="text"]').val("");
            //$('#vip-option').prop('selectedIndex', 0);
            document.getElementById("btypemodalmodal-name").innerHTML = 'Add Business Type';
            document.getElementById("btypesave").innerHTML = 'Save';
            $('#btypemodal').modal('show');

        });
        $('#add-business').click(function () {
            i_id=0;
            var img = $('<img>').attr('src', "https://www.alfardanoysterprivilegeclub.com/assets/img/defaultavatar.png");
        var img2 = $('<img>').attr('src', "https://www.alfardanoysterprivilegeclub.com/assets/img/defaultavatar.png");
            img.attr('height', '120px');
            img.attr('width', '120px');
            $('.upload-image-preview').html(img);
            $(".pip").empty();
            $('input[type="text"]').val("");
            $('input[type="email"]').val("");
            $('#btype-option').prop('selectedIndex', 0);
            $('#bloc-option').prop('selectedIndex', 0);
            document.getElementById("descrip").value = "";
            document.getElementById("Address").value = "";
            document.getElementById("bmodal-name").innerHTML = 'Add Hotel ';
            document.getElementById("bsave").innerHTML = 'Save'; 
            ShowOptBtype();
            $('#bmodal').modal('show');


        });
     
        $('#submitbloc').submit(function(e){
            e.preventDefault();
        
            var data = {};
            data.id = i_id;
            data.country = $('#country').val();
            data.city = $('#city').val();
            data.postalCode = $('#postal').val();
            data.Active = "5";
            //
            let message="";
            if(i_id != 0)
            {
                message ='Are you sure you want to update business location?';
            }
            else
            {
            message = 'Are you sure you want to add new business location?';
            }
            iziToast.question({
                        timeout: 20000,
                        close: false,
                        overlay: true,
                        id: 'question',
                        zindex: 999,
                        title: 'Confirmation',
                        message: message,
                        position: 'center',
                        buttons: [
                            ['<button><b>YES</b></button>', function (instance, toast) {
                                $.blockUI(reloadLoading);
                                $.ajax({
                                            url: '/Business/SaveBusinessLoc',
                                    data: {
                                        data: data,
                                    },
                                    type: "POST",
                                    datatype: "json",
                                }).done(function (response) {
                                    // console.log(response.stats);
                                    if(response.stats=="Inserted Successfully" || response.stats=="Updated Successfully")
                                    {
                                          
                                        notifyMsg('Success!', response.stats, 'green', 'fas fa-check');
                                        $("#h-close").click();
                                        businessLocTable.destroy();
                                        ShowBusinesslocDetails();
                                    }
                                    else
                                    {
                                        notifyMsg('Warning!', response.stats, 'red', 'fas fa-exclamation-triangle');
                                    }
                                            
                                        $.unblockUI();

                                }).fail(function () {
                                    alert("There was an Error When Loading Data...");
                                });
                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }, true],
                            ['<button>NO</button>', function (instance, toast) {

                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }],
                        ]
                    });

            
        });

        $('#submitbtype').submit(function(e){
            e.preventDefault();
            filename=$("#img").val().replace(/.*(\/|\\)/, ''); 
            // console.log(filename);
            if(filename =="" || filename == null)
            {
            filename = img_edit;
            }

            var data = {};
            data.id = i_id;
            data.BusinessTypeName = $('#btypename').val();
            data.Description = $('#description').val();
            data.isVIP = "";
            data.PromoText = $('#promoT').val();
            data.ImgURL=filename;
            let message="";
            // console.log(data);
            if(i_id != 0)
            {
                message ='Are you sure you want to update business type?';
            }
            else
            {
            message = 'Are you sure you want to add new business type?';
            }
            iziToast.question({
                        timeout: 20000,
                        close: false,
                        overlay: true,
                        id: 'question',
                        zindex: 999,
                        title: 'Confirmation',
                    message: message,
                        position: 'center',
                        buttons: [
                            ['<button><b>YES</b></button>', function (instance, toast) {
                                $.blockUI(reloadLoading);
                                $.ajax({
                                    url: '/Business/SaveBusinessType',
                                    data: {
                                        data: data,
                                    },
                                    type: "POST",
                                    datatype: "json",
                                }).done(function (response) {
                                    // console.log(response.stats);
                                    if(response.stats=="Inserted Successfully" || response.stats=="Updated Successfully")
                                    {
                                          
                                        notifyMsg('Success!', response.stats, 'green', 'fas fa-check');
                                        $("#btype-close").click();
                                        ShowBusinessTypeList();
                                    }
                                    else
                                    {
                                        notifyMsg('Warning!', response.stats, 'red', 'fas fa-exclamation-triangle');
                                    }
                                            
                                        $.unblockUI();

                                }).fail(function () {
                                    alert("There was an Error When Loading Data...");
                                });
                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }, true],
                            ['<button>NO</button>', function (instance, toast) {

                                instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                            }],
                        ]
                    });

          
        });
        $('#submitbusiness').submit(function(e){
              e.preventDefault();
              filename=$("#img").val().replace(/.*(\/|\\)/, ''); 
              // console.log(filename);
              if(filename =="" || filename == null)
              {
              filename = img_edit;
              }
              var image="";
            $('#upload-image-preview_multiple').find('img').each(function (index, value) {
                 image += this.name +";";
               });
       
            // console.log(image);
                var input = document.getElementById('fileUpload');
              var data = {};
              data.id = i_id;
              data.businessName  = $("#hotelname").val();
              data.TypeId  = "1";
              data.LocationID  = $("#bloc-option").val();
              data.description  = $("#descrip").val();
              data.address  = $("#Address").val();
              data.Cno  = $("#cno").val();
              data.gallery= image;
              data.email  = $("#email").val();
              data.url  = $("#Url").val();
              data.Services   = $('#Services').val();
              data.map   = $("#Map").val();
              data.featureImg=filename;
                let formData = new FormData();
            var fileUpload = $("#img").get(0);
            var files = fileUpload.files;
            var m_files = input.files;
            for (var i = 0; i != m_files.length; i++) {
                formData.append("file", m_files[i]); //loop through all files and append
            }
            formData.append('file', files[0]);
            var fileUpload = $("#upload-img").get(0);
            let message = "";
            if (i_id != 0) {
                message = 'Are you sure you want to update ' + $("#hotelname").val();
            }
            else {
                message = 'Are you sure you want to add new Hotel?';
            }
            iziToast.question({
                            timeout: 20000,
                            close: false,
                            overlay: true,
                            id: 'question',
                            zindex: 999,
                            title: 'Confirmation',
                            message: message,
                            position: 'center',
                            buttons: [
                                ['<button><b>YES</b></button>', function (instance, toast) {
                                    $.blockUI(reloadLoading);
                                    $.ajax({
                                     url: '/Business/SaveBusinessinfo',
                                        data: {
                                            data: data,
                                        },
                                        type: "POST",
                                        datatype: "json",
                                    }).done(function (response) {
                                      // console.log(response.stats);
                                      if(response.stats=="Inserted Successfully" || response.stats=="Updated Successfully")
                                      {       $.blockUI(reloadLoading);
                                          $.ajax({
                                            url: '/Business/UploadFile',
                                                type: 'POST',
                                                data: formData,
                                                processData: false,
                                                contentType: false,

                                                success: function (result) {   
                                              
                                                }
                                               }).fail(function () {
                                      alert("There was an Error When Loading Data...");
                                  });
                                         
                                          notifyMsg('Success!', response.stats, 'green', 'fas fa-check');
                            
                                          $("#bh-close").click();
                                            ShowBusinessListv2();
                               
                                      }
                                      else
                                      {
                                         notifyMsg('Warning!', response.stats, 'red', 'fas fa-exclamation-triangle');
                                      }
                                            
                                         $.unblockUI();

                                    }).fail(function () {
                                        alert("There was an Error When Loading Data...");
                                    });
                                    instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                                }, true],
                                ['<button>NO</button>', function (instance, toast) {

                                    instance.hide({ transitionOut: 'fadeOut' }, toast, 'button');

                                }],
                            ]
                        });

          });
      </script>
}